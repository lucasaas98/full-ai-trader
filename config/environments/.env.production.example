# AI Trading System Production Environment Configuration
# This is an example production configuration - copy to .env.production and customize

# =============================================================================
# ENVIRONMENT IDENTIFICATION
# =============================================================================
ENVIRONMENT=production
NODE_ENV=production

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=trading_system_prod
DB_USER=trader_prod
DB_PASSWORD=CHANGE_ME_SECURE_PASSWORD_32_CHARS_MIN
DB_SSL_MODE=require
DB_POOL_MIN_SIZE=10
DB_POOL_MAX_SIZE=50
DB_COMMAND_TIMEOUT=60
DB_QUERY_TIMEOUT=60

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_SECURE
REDIS_DB=0
REDIS_MAX_CONNECTIONS=100
REDIS_TIMEOUT=10

# =============================================================================
# API KEYS AND EXTERNAL SERVICES
# =============================================================================
# Market Data APIs
TWELVE_DATA_API_KEY=REPLACE_WITH_PRODUCTION_API_KEY
FINVIZ_API_KEY=REPLACE_WITH_PRODUCTION_API_KEY

# Trading Broker APIs - LIVE TRADING
ALPACA_API_KEY=REPLACE_WITH_LIVE_ALPACA_API_KEY
ALPACA_SECRET_KEY=REPLACE_WITH_LIVE_ALPACA_SECRET_KEY
ALPACA_BASE_URL=https://api.alpaca.markets
ALPACA_DATA_URL=https://data.alpaca.markets
ALPACA_PAPER_TRADING=false

# =============================================================================
# RISK MANAGEMENT SETTINGS - PRODUCTION VALUES
# =============================================================================
RISK_MAX_POSITION_SIZE=0.03
RISK_MAX_PORTFOLIO_RISK=0.015
RISK_DRAWDOWN_LIMIT=0.10
RISK_MAX_DAILY_LOSS=0.02
RISK_MAX_CORRELATION=0.6
RISK_VaR_CONFIDENCE=0.99
RISK_STRESS_TEST_ENABLED=true

# =============================================================================
# TRADING SETTINGS - PRODUCTION
# =============================================================================
TRADING_ENABLED=true
TRADING_MODE=live
TRADING_SESSION_START=09:30
TRADING_SESSION_END=16:00
TRADING_TIMEZONE=America/New_York
TRADING_ALLOWED_SYMBOLS=SPY,QQQ,AAPL,MSFT,GOOGL,TSLA,NVDA,META,AMZN,NFLX,AMD,CRM,ADBE,PYPL,INTC,CSCO,PEP,KO,PFE,JNJ
TRADING_MIN_TRADE_SIZE=500
TRADING_MAX_TRADE_SIZE=50000

# =============================================================================
# STRATEGY CONFIGURATION - PRODUCTION
# =============================================================================
STRATEGY_ENABLED_STRATEGIES=momentum,mean_reversion
STRATEGY_DEFAULT_TIMEFRAME=1h
STRATEGY_LOOKBACK_PERIOD=200
STRATEGY_CONFIDENCE_THRESHOLD=0.8
STRATEGY_MAX_POSITIONS=5
STRATEGY_REBALANCE_FREQUENCY=daily

# =============================================================================
# SCHEDULER CONFIGURATION - PRODUCTION
# =============================================================================
SCHEDULER_MARKET_DATA_INTERVAL=30
SCHEDULER_STRATEGY_INTERVAL=180
SCHEDULER_RISK_CHECK_INTERVAL=30
SCHEDULER_PORTFOLIO_UPDATE_INTERVAL=60
SCHEDULER_BACKUP_INTERVAL=1800
SCHEDULER_HEALTH_CHECK_INTERVAL=15

# =============================================================================
# LOGGING CONFIGURATION - PRODUCTION
# =============================================================================
LOG_LEVEL=WARNING
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/app/logs
LOG_FILE_MAX_SIZE=50MB
LOG_FILE_BACKUP_COUNT=20
LOG_CONSOLE_ENABLED=false
LOG_STRUCTURED=true

# =============================================================================
# MONITORING AND METRICS - PRODUCTION
# =============================================================================
METRICS_ENABLED=true
METRICS_PORT=9090
PROMETHEUS_ENDPOINT=http://prometheus:9090
GRAFANA_URL=https://your-grafana-domain.com
GRAFANA_USER=admin
GRAFANA_PASSWORD=CHANGE_ME_GRAFANA_SECURE_PASSWORD

# =============================================================================
# NOTIFICATION SETTINGS - PRODUCTION
# =============================================================================
GOTIFY_URL=https://your-gotify-domain.com
GOTIFY_TOKEN=REPLACE_WITH_PRODUCTION_GOTIFY_TOKEN
GOTIFY_ENABLED=true

# Email notifications
EMAIL_ENABLED=true
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=trading-alerts@yourcompany.com
EMAIL_PASSWORD=REPLACE_WITH_APP_PASSWORD
EMAIL_FROM=trading-system@yourcompany.com
EMAIL_TO=admin@yourcompany.com,trader@yourcompany.com

# Slack notifications
SLACK_ENABLED=true
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/REPLACE/WITH/YOUR/WEBHOOK

# =============================================================================
# SECURITY SETTINGS - PRODUCTION
# =============================================================================
# API Security
API_SECRET_KEY=CHANGE_ME_RANDOM_64_CHAR_SECRET_KEY_FOR_PRODUCTION_USE
API_ALGORITHM=HS256
API_ACCESS_TOKEN_EXPIRE_MINUTES=60
API_RATE_LIMIT_PER_MINUTE=30

# JWT Settings
JWT_SECRET_KEY=CHANGE_ME_DIFFERENT_64_CHAR_JWT_SECRET_FOR_PRODUCTION
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30

# CORS Settings - Restrict to production domains
CORS_ORIGINS=https://your-trading-dashboard.com,https://your-admin-panel.com
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# BACKUP CONFIGURATION - PRODUCTION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=4
BACKUP_RETENTION_DAYS=90
BACKUP_S3_ENABLED=true
BACKUP_S3_BUCKET=your-production-backup-bucket
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY=REPLACE_WITH_S3_ACCESS_KEY
BACKUP_S3_SECRET_KEY=REPLACE_WITH_S3_SECRET_KEY

# Local backup settings
BACKUP_LOCAL_PATH=/app/data/backups
BACKUP_COMPRESS=true
BACKUP_ENCRYPT=true
BACKUP_ENCRYPTION_KEY=REPLACE_WITH_32_CHAR_ENCRYPTION_KEY

# =============================================================================
# DATA STORAGE SETTINGS - PRODUCTION
# =============================================================================
DATA_STORAGE_PATH=/app/data
PARQUET_STORAGE_PATH=/app/data/parquet
PARQUET_COMPRESSION=snappy
PARQUET_BATCH_SIZE=50000

# Data retention - longer for production
DATA_RETENTION_DAYS=2555  # 7 years for compliance
DATA_CLEANUP_ENABLED=true
DATA_CLEANUP_INTERVAL_HOURS=24

# =============================================================================
# FEATURE FLAGS - PRODUCTION
# =============================================================================
FEATURE_PAPER_TRADING=false
FEATURE_LIVE_TRADING=true
FEATURE_BACKTESTING=true
FEATURE_ML_STRATEGIES=true
FEATURE_OPTIONS_TRADING=false
FEATURE_CRYPTO_TRADING=false
FEATURE_FOREX_TRADING=false

# =============================================================================
# PERFORMANCE SETTINGS - PRODUCTION
# =============================================================================
# Service resource limits
MEMORY_LIMIT_MB=4096
CPU_LIMIT_CORES=4
WORKER_PROCESSES=2
WORKER_THREADS=8

# Cache settings - longer TTL for production
CACHE_TTL_MARKET_DATA=600
CACHE_TTL_STRATEGIES=3600
CACHE_TTL_RISK_ASSESSMENTS=1800
CACHE_TTL_PORTFOLIO=300

# =============================================================================
# DEVELOPMENT SETTINGS - DISABLED IN PRODUCTION
# =============================================================================
DEBUG=false
RELOAD_ON_CHANGE=false
PROFILING_ENABLED=false
TESTING_MODE=false

# Mock services - disabled in production
MOCK_ALPACA_API=false
MOCK_MARKET_DATA=false
MOCK_NOTIFICATIONS=false

# =============================================================================
# PRODUCTION SECURITY SETTINGS
# =============================================================================
# HTTPS and security headers
HSTS_ENABLED=true
HTTPS_ONLY=true
SECURE_COOKIES=true
SECURE_HEADERS_ENABLED=true

# IP allowlist for admin functions
ADMIN_ALLOWED_IPS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# =============================================================================
# MONITORING AND ALERTING - PRODUCTION
# =============================================================================
# Health check settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=15
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_RETRIES=3

# Alert thresholds - stricter for production
ALERT_HIGH_MEMORY_THRESHOLD=0.7
ALERT_HIGH_CPU_THRESHOLD=0.7
ALERT_LOW_DISK_SPACE_THRESHOLD=0.15
ALERT_MAX_RESPONSE_TIME=2000

# Portfolio alerts - stricter for production
ALERT_MAX_DRAWDOWN_THRESHOLD=0.05
ALERT_DAILY_LOSS_THRESHOLD=0.03
ALERT_POSITION_SIZE_THRESHOLD=0.05

# =============================================================================
# MAINTENANCE SETTINGS - PRODUCTION
# =============================================================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="Trading system is temporarily under maintenance"
MAINTENANCE_ESTIMATED_DURATION=30
MAINTENANCE_ALLOWED_IPS=127.0.0.1,::1,YOUR_ADMIN_IP_HERE

# Auto-maintenance settings
AUTO_MAINTENANCE_ENABLED=true
AUTO_MAINTENANCE_TIME=02:00
AUTO_MAINTENANCE_TIMEZONE=America/New_York
AUTO_MAINTENANCE_MAX_DURATION=30

# =============================================================================
# EXPORT AND REPORTING - PRODUCTION
# =============================================================================
EXPORT_ENABLED=true
EXPORT_PATH=/app/data/exports
EXPORT_RETENTION_DAYS=2555  # 7 years
EXPORT_MAX_FILE_SIZE=500MB
EXPORT_TRADENOTE_ENABLED=true
EXPORT_TAX_REPORTING_ENABLED=true

# =============================================================================
# RATE LIMITING - PRODUCTION STRICT
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=30
RATE_LIMIT_REQUESTS_PER_HOUR=500
RATE_LIMIT_REQUESTS_PER_DAY=5000
RATE_LIMIT_BURST_SIZE=5

# API-specific rate limits - stricter for production
RATE_LIMIT_MARKET_DATA_RPM=20
RATE_LIMIT_TRADING_RPM=5
RATE_LIMIT_EXPORT_RPM=2

# =============================================================================
# AUDIT AND COMPLIANCE - PRODUCTION
# =============================================================================
AUDIT_ENABLED=true
AUDIT_LOG_ALL_REQUESTS=true
AUDIT_LOG_TRADES=true
AUDIT_LOG_RISK_EVENTS=true
AUDIT_LOG_CONFIGURATION_CHANGES=true
AUDIT_RETENTION_DAYS=2555  # 7 years for compliance
AUDIT_ENCRYPT_LOGS=true

# =============================================================================
# TIMEZONE AND LOCALIZATION - PRODUCTION
# =============================================================================
DEFAULT_TIMEZONE=UTC
MARKET_TIMEZONE=America/New_York
DISPLAY_TIMEZONE=America/New_York
DATE_FORMAT=%Y-%m-%d
TIME_FORMAT=%H:%M:%S
DATETIME_FORMAT=%Y-%m-%d %H:%M:%S

# =============================================================================
# ADVANCED CONFIGURATION - PRODUCTION
# =============================================================================
# Circuit breaker settings - more aggressive for production
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=3
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=120
CIRCUIT_BREAKER_TIMEOUT=15

# Retry settings - more conservative for production
RETRY_MAX_ATTEMPTS=2
RETRY_BACKOFF_FACTOR=2
RETRY_MAX_DELAY=30

# WebSocket settings
WEBSOCKET_ENABLED=true
WEBSOCKET_HEARTBEAT_INTERVAL=15
WEBSOCKET_MAX_CONNECTIONS=50

# =============================================================================
# PRODUCTION DEPLOYMENT METADATA
# =============================================================================
DEPLOYMENT_VERSION=1.0.0
DEPLOYMENT_BUILD_NUMBER=
DEPLOYMENT_COMMIT_SHA=
DEPLOYMENT_TIMESTAMP=
DEPLOYMENT_ENVIRONMENT=production
